-- [Auto Teleport Script - Delta Executor Friendly]

repeat task.wait() until game:IsLoaded()

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local currentInstanceId = game.JobId
local PLACE_ID = game.PlaceId -- atau hardcode jika perlu
local API_URL = "https://backend-vercel-ashy.vercel.app/api/latest-instance.js"

local function fetchLatestInstance()
    local success, result = pcall(function()
        return game:HttpGet(API_URL)
    end)

    if success then
        local ok, json = pcall(function()
            return HttpService:JSONDecode(result)
        end)

        if ok and json.instanceId then
            return json.instanceId
        end
    end

    return nil
end

local function checkAndTeleport()
    local latestInstance = fetchLatestInstance()

    if latestInstance and latestInstance ~= currentInstanceId then
        warn("ðŸ”„ Instance baru ditemukan! Teleporting...")
        TeleportService:TeleportToPlaceInstance(PLACE_ID, latestInstance, player)
    else
        print("âœ… Instance saat ini masih yang terbaru.")
    end
end

-- Loop untuk pengecekan tiap 10 detik
while task.wait(10) do
    checkAndTeleport()
end
