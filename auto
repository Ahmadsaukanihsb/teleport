local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local PLACE_ID = 1234567890 -- ganti dengan place ID game kamu
local API_URL = "https://backend-vercel-ashy.vercel.app/api/latest-instance"

local currentInstanceId = game.JobId

local function fetchLatestInstance()
	local success, response = pcall(function()
		return HttpService:GetAsync(API_URL)
	end)

	if success then
		local data = HttpService:JSONDecode(response)
		if data.instanceId and data.instanceId ~= currentInstanceId then
			print("Instance baru terdeteksi. Teleporting...")
			TeleportService:TeleportToPlaceInstance(PLACE_ID, data.instanceId, Players.LocalPlayer)
		else
			print("Tidak ada instance baru.")
		end
	else
		warn("Gagal mengambil instance terbaru:", response)
	end
end

-- Cek instance baru setiap 10 detik
while task.wait(10) do
	fetchLatestInstance()
end
