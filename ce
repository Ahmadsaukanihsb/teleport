local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

-- 1. Tunggu LocalPlayer siap
local localPlayer = Players.LocalPlayer
while not localPlayer do
    task.wait(1)
    localPlayer = Players.LocalPlayer
end

-- 2. Fungsi untuk mencari tombol Accept
local function findAcceptButton()
    local gui = localPlayer:WaitForChild("PlayerGui")
    local acceptButton = gui:FindFirstChild("Accept", true) -- Cari tombol bernama "Accept"
    
    -- Jika tidak ditemukan, cari berdasarkan teks
    if not acceptButton then
        for _, element in ipairs(gui:GetDescendants()) do
            if element:IsA("TextButton") and string.match(element.Text:lower(), "accept") then
                acceptButton = element
                break
            end
        end
    end
    
    return acceptButton
end

-- 3. Fungsi untuk mengklik tombol dengan cara yang benar
local function clickAcceptButton(button)
    local success, err = pcall(function()
        -- Cara 1: Gunakan Activated (untuk sebagian besar game)
        if button:IsA("TextButton") or button:IsA("ImageButton") then
            button.Activated:Fire()
            return true
        end
        
        -- Cara 2: Gunasi MouseButton1Click (jika tersedia)
        if button:FindFirstChild("MouseButton1Click") then
            button.MouseButton1Click:Fire()
            return true
        end
        
        -- Cara 3: Jika semua gagal, coba klik via input virtual
        local absolutePosition = button.AbsolutePosition
        local absoluteSize = button.AbsoluteSize
        local clickPosition = Vector2.new(
            absolutePosition.X + absoluteSize.X/2,
            absolutePosition.Y + absoluteSize.Y/2
        )
        
        UserInputService:SendMouseButtonEvent(
            clickPosition.X,
            clickPosition.Y,
            0, -- Left mouse button
            true, -- Press
            game
        )
        task.wait(0.1)
        UserInputService:SendMouseButtonEvent(
            clickPosition.X,
            clickPosition.Y,
            0, -- Left mouse button
            false, -- Release
            game
        )
        
        return true
    end)
    
    if not success then
        warn("Gagal mengklik tombol:", err)
    end
    return success
end

-- 4. Main loop
while task.wait(2) do
    local acceptButton = findAcceptButton()
    
    if acceptButton then
        print("Tombol Accept ditemukan di:", acceptButton:GetFullName())
        if clickAcceptButton(acceptButton) then
            print("Berhasil mengklik Accept!")
        else
            print("Gagal mengklik, mencoba metode lain...")
        end
    else
        print("Memindai gift...")
    end
end
